import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from "react/jsx-runtime";
import { Button } from "@/components/ui/button";
import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from "@/components/ui/table";
import { normalizeFileUrl } from "@/lib/file-url";
export function FileTable({ files, isLoading, onDelete, deletingId, showOwner, onPreview }) {
    if (isLoading) {
        return _jsx("p", { className: "text-sm text-muted-foreground", children: "\u52A0\u8F7D\u4E2D..." });
    }
    if (!files?.length) {
        return _jsx("p", { className: "text-sm text-muted-foreground", children: "\u6682\u65E0\u6587\u4EF6" });
    }
    const copy = (text) => {
        navigator.clipboard.writeText(text);
    };
    return (_jsxs(_Fragment, { children: [_jsx("div", { className: "hidden md:block overflow-x-auto", children: _jsxs(Table, { children: [_jsx(TableHeader, { children: _jsxs(TableRow, { children: [_jsx(TableHead, { children: "\u9884\u89C8" }), _jsx(TableHead, { children: "\u540D\u79F0" }), _jsx(TableHead, { children: "\u53EF\u89C1\u6027" }), _jsx(TableHead, { children: "\u5927\u5C0F" }), showOwner && _jsx(TableHead, { children: "\u6240\u6709\u8005" }), _jsx(TableHead, { children: "\u64CD\u4F5C" })] }) }), _jsx(TableBody, { children: files.map((item) => (_jsxs(TableRow, { children: [_jsx(TableCell, { children: _jsx("img", { src: normalizeFileUrl(item.viewUrl || item.directUrl), alt: item.originalName, className: "h-12 w-12 rounded-md object-cover" }) }), _jsxs(TableCell, { className: "max-w-[220px]", children: [_jsx("p", { className: "truncate font-medium", children: item.originalName }), _jsx("p", { className: "text-xs text-muted-foreground", children: item.strategyName ? `策略：${item.strategyName}` : "策略：默认" })] }), _jsx(TableCell, { children: item.visibility === "public" ? "公开" : "私有" }), _jsxs(TableCell, { children: [(item.size / 1024).toFixed(1), " KB"] }), showOwner && _jsx(TableCell, { children: item.ownerName ?? "-" }), _jsxs(TableCell, { className: "space-x-2 text-right", children: [onPreview && (_jsx(Button, { variant: "ghost", size: "sm", onClick: () => onPreview(item), children: "\u9884\u89C8" })), _jsx(Button, { variant: "ghost", size: "sm", onClick: () => copy(normalizeFileUrl(item.directUrl)), children: "\u590D\u5236\u94FE\u63A5" }), _jsx(Button, { variant: "ghost", size: "sm", onClick: () => copy(item.markdown), children: "Markdown" }), onDelete && (_jsx(Button, { variant: "ghost", size: "sm", onClick: () => onDelete(item.id), disabled: deletingId === item.id, children: "\u5220\u9664" }))] })] }, item.id))) })] }) }), _jsx("div", { className: "md:hidden space-y-3", children: files.map((item) => (_jsxs("div", { className: "rounded-lg border bg-card p-3 space-y-3", children: [_jsxs("div", { className: "flex gap-3", children: [_jsx("img", { src: normalizeFileUrl(item.viewUrl || item.directUrl), alt: item.originalName, className: "h-16 w-16 rounded-md object-cover flex-shrink-0" }), _jsxs("div", { className: "flex-1 min-w-0", children: [_jsx("p", { className: "truncate font-medium text-sm", children: item.originalName }), _jsx("p", { className: "text-xs text-muted-foreground mt-1", children: item.strategyName ? `策略：${item.strategyName}` : "策略：默认" }), _jsxs("div", { className: "flex gap-2 mt-1 text-xs text-muted-foreground", children: [_jsx("span", { children: item.visibility === "public" ? "公开" : "私有" }), _jsx("span", { children: "\u00B7" }), _jsxs("span", { children: [(item.size / 1024).toFixed(1), " KB"] }), showOwner && (_jsxs(_Fragment, { children: [_jsx("span", { children: "\u00B7" }), _jsx("span", { children: item.ownerName ?? "-" })] }))] })] })] }), _jsxs("div", { className: "flex flex-wrap gap-2", children: [onPreview && (_jsx(Button, { variant: "outline", size: "sm", className: "flex-1", onClick: () => onPreview(item), children: "\u9884\u89C8" })), _jsx(Button, { variant: "outline", size: "sm", className: "flex-1", onClick: () => copy(normalizeFileUrl(item.directUrl)), children: "\u590D\u5236\u94FE\u63A5" }), _jsx(Button, { variant: "outline", size: "sm", className: "flex-1", onClick: () => copy(item.markdown), children: "Markdown" }), onDelete && (_jsx(Button, { variant: "outline", size: "sm", className: "flex-1", onClick: () => onDelete(item.id), disabled: deletingId === item.id, children: "\u5220\u9664" }))] })] }, item.id))) })] }));
}
